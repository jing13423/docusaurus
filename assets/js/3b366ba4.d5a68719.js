"use strict";(self.webpackChunkwechaty_docusaurus=self.webpackChunkwechaty_docusaurus||[]).push([[2357],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return h}});var n=a(67294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var i=n.createContext({}),c=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=c(a),h=l,m=d["".concat(i,".").concat(h)]||d[h]||s[h]||o;return a?n.createElement(m,r(r({ref:t},u),{},{components:a})):n.createElement(m,r({ref:t},u))}));function h(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,r=new Array(o);r[0]=d;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:l,r[1]=p;for(var c=2;c<o;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},12406:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return p},metadata:function(){return c},toc:function(){return s}});var n=a(87462),l=a(63366),o=(a(67294),a(3905)),r=["components"],p={title:"Puppet Service: PadLocal",sidebar_label:"PadLocal"},i=void 0,c={unversionedId:"puppet-services/padlocal",id:"puppet-services/padlocal",title:"Puppet Service: PadLocal",description:"Wechaty Puppet Service PadLocal",source:"@site/docs/puppet-services/padlocal.md",sourceDirName:"puppet-services",slug:"/puppet-services/padlocal",permalink:"/docs/puppet-services/padlocal",editUrl:"https://github.com/wechaty/docusaurus/edit/main/docusaurus/docs/puppet-services/padlocal.md",tags:[],version:"current",lastUpdatedBy:"Soumi Bardhan",lastUpdatedAt:1631860796,formattedLastUpdatedAt:"9/17/2021",frontMatter:{title:"Puppet Service: PadLocal",sidebar_label:"PadLocal"},sidebar:"docs",previous:{title:"WXWork",permalink:"/docs/puppet-services/wxwork"},next:{title:"Paimon",permalink:"/docs/puppet-services/paimon"}},u={},s=[{value:"How to buy(apply)",id:"how-to-buyapply",level:2},{value:"Running wechaty-puppet-padlocal on cloud",id:"running-wechaty-puppet-padlocal-on-cloud",level:2},{value:"Precautions",id:"precautions",level:3},{value:"Test Date",id:"test-date",level:3},{value:"Environment",id:"environment",level:3},{value:"Architecture",id:"architecture",level:2},{value:"Steps",id:"steps",level:3},{value:"Step 1 : Run wechaty-puppet-padlocal",id:"step-1--run-wechaty-puppet-padlocal",level:3},{value:"Step 2 : verify hostie token",id:"step-2--verify-hostie-token",level:3},{value:"Step 3 : Run python locally",id:"step-3--run-python-locally",level:3},{value:"QRcode",id:"qrcode",level:3},{value:"Step 4 : WeChat scan code",id:"step-4--wechat-scan-code",level:3},{value:"Blogs",id:"blogs",level:2},{value:"History",id:"history",level:2},{value:"More Info",id:"more-info",level:2}],d={toc:s};function h(e){var t=e.components,p=(0,l.Z)(e,r);return(0,o.kt)("wrapper",(0,n.Z)({},d,p,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/docs/puppet-services/padlocal"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/Service-PadLocal-blue",alt:"Wechaty Puppet Service PadLocal"}))),(0,o.kt)("h2",{id:"how-to-buyapply"},"How to buy(apply)"),(0,o.kt)("p",null,"Go to ",(0,o.kt)("a",{parentName:"p",href:"http://pad-local.com/"},"pad-local.com")," to avail a ",(0,o.kt)("strong",{parentName:"p"},"FREE")," trail token for ",(0,o.kt)("strong",{parentName:"p"},"7")," days."),(0,o.kt)("h2",{id:"running-wechaty-puppet-padlocal-on-cloud"},"Running wechaty-puppet-padlocal on cloud"),(0,o.kt)("h3",{id:"precautions"},"Precautions"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Update cmd in step1 docker run.")),(0,o.kt)("h3",{id:"test-date"},"Test Date"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"March 01, 2021"),(0,o.kt)("li",{parentName:"ul"},"March 16, 2021")),(0,o.kt)("h3",{id:"environment"},"Environment"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Local mobile phone (iPad or mobile phone is fine)"),(0,o.kt)("li",{parentName:"ul"},"PC (Mac is used here)"),(0,o.kt)("li",{parentName:"ul"},"Virtual machine for puppet on Alibaba Cloud")),(0,o.kt)("h2",{id:"architecture"},"Architecture"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Architecture",src:a(1409).Z,width:"1663",height:"1102"})),(0,o.kt)("h3",{id:"steps"},"Steps"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Run ",(0,o.kt)("inlineCode",{parentName:"li"},"wechaty-puppet-padlocal")," on a virtual machine"),(0,o.kt)("li",{parentName:"ol"},"Verify that the API is successfully registered"),(0,o.kt)("li",{parentName:"ol"},"Run local ",(0,o.kt)("inlineCode",{parentName:"li"},"python-wechaty-getting-started")),(0,o.kt)("li",{parentName:"ol"},"Scan code login")),(0,o.kt)("h3",{id:"step-1--run-wechaty-puppet-padlocal"},"Step 1 : Run wechaty-puppet-padlocal"),(0,o.kt)("p",null,"You will need a domestic public network IP+Token (please register with the administrator) to make wechaty-puppet take effect in the virtual machine part. For the trial or free plan, you can choose Alibaba Cloud or Huawei Cloud or GCP. It is a pity that Google does not have a domestic IP. , or you can also play gcp's k8s by the way, suggest that you still use domestic resources."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Step 1",src:a(5540).Z,width:"1495",height:"446"})),(0,o.kt)("p",null,"Just register a ubuntu20.04, pay attention to the security group to release port 8788.\nRun the following command in ubuntu cmdline."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'apt update\napt install docker.io\ndocker pull wechaty/wechaty\nexport WECHATY_PUPPET_PADLOCAL_TOKEN=puppet_padlocal_xxxxxxxxxxxxxxxxxx\nexport WECHATY_PUPPET_SERVER_PORT=8788\nexport WECHATY_PUPPET=wechaty-puppet-padlocal\nexport WECHATY_LOG=verbose\ndocker run \\\n  --rm \\\n  -ti \\\n  -e WECHATY_LOG \\\n  -e WECHATY_PUPPET \\\n  -e WECHATY_PUPPET_PADLOCAL_TOKEN \\\n  -e WECHATY_PUPPET_SERVER_PORT \\\n  -e WECHATY_TOKEN="$WECHATY_PUPPET_PADLOCAL_TOKEN" \\\n  -p "$WECHATY_PUPPET_SERVER_PORT:$WECHATY_PUPPET_SERVER_PORT" \\\n  wechaty/wechaty\n')),(0,o.kt)("p",null,"You can issue an instruction to check whether it is running normally, as shown in the figure :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"netstat -ntlp\ndocker container ls\n")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Step 1-terminal",src:a(87376).Z,width:"1820",height:"562"})),(0,o.kt)("p",null,"You can telnet the virtual machine IP: 8788, simple debugging will not work.\n(Optional) You can change docker run to docker-compose by running, and the virtual machine can grow up automatically after it crashes."),(0,o.kt)("h3",{id:"step-2--verify-hostie-token"},"Step 2 : verify hostie token"),(0,o.kt)("p",null,"Visit ",(0,o.kt)("a",{parentName:"p",href:"https://api.chatie.io/v0/hosties/puppet_padlocal_xxxxxxxx"},"this link")," to check whether your token is successfully registered, if not, please go back to step 1."),(0,o.kt)("p",null,'Good:\n{"ip":"47.119.129.29","port":8788}'),(0,o.kt)("p",null,'No Good:\n{"ip":"0.0.0.0","port":0}'),(0,o.kt)("h3",{id:"step-3--run-python-locally"},"Step 3 : Run python locally"),(0,o.kt)("p",null,"python-wechaty-getting-started you need Python3.7+"),(0,o.kt)("p",null,"Run the following cmd :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"git clone https://github.com/wechaty/python-wechaty-getting-started\ncd python-wechaty-getting-started\npip3 install -r requirements.txt\nexport WECHATY_PUPPET=wechaty-puppet-service\nexport WECHATY_PUPPET_SERVICE_TOKEN=your_token_at_here\npython3 examples/ding-dong-bot.py\n")),(0,o.kt)("p",null,"Just wait for the QR code to appear"),(0,o.kt)("h3",{id:"qrcode"},"QRcode"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"QRCode",src:a(79659).Z,width:"800",height:"559"})),(0,o.kt)("h3",{id:"step-4--wechat-scan-code"},"Step 4 : WeChat scan code"),(0,o.kt)("p",null,"Currently using a new account registration will fail - Fixed\nLog in after scanning."),(0,o.kt)("p",null,"Finally, invite friends or send ding to yourself (no spaces and all lowercase letters), and it will automatically return to dong!\nThere will be a lot of resources and applications on the official website in the follow-up, so please check it out when you have time."),(0,o.kt)("h2",{id:"blogs"},"Blogs"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://wechaty.js.org/2021/03/08/python-wechaty-and-wechaty-puppet-padlocal/"},"Python-wechaty & wechaty-puppet-padlocal\u7684\u521d\u63a2, iivveess, Mar 8, 2021")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://wechaty.js.org/2021/02/03/python-wechaty-for-padlocal-puppet-service/"},"Python Wechaty\u5982\u4f55\u4f7f\u7528PadLocal Puppet Service, Biofer, Feb, 3, 2021")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://wechaty.js.org/2021/01/28/csharp-wechaty-for-padlocal-puppet-service/"},".NET Wechaty\u5982\u4f55\u4f7f\u7528PadLocal Puppet Service, Darren, Jan 28, 2021"))),(0,o.kt)("p",null,"Read more blogs with the ",(0,o.kt)("inlineCode",{parentName:"p"},"padlocal")," tag at ",(0,o.kt)("a",{parentName:"p",href:"https://wechaty.js.org/tags.html#padlocal"},"https://wechaty.js.org/tags.html#padlocal")),(0,o.kt)("h2",{id:"history"},"History"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://wechaty.js.org/2020/10/12/puppet-padlocal-intro/"},"Alpha Announcement: New Wechaty Puppet Service: PadLocal")),(0,o.kt)("li",{parentName:"ol"},"Testing Progress"),(0,o.kt)("li",{parentName:"ol"},"Beta Announcement"),(0,o.kt)("li",{parentName:"ol"},"Release Announcement")),(0,o.kt)("h2",{id:"more-info"},"More Info"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Repo: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/padlocal/wechaty-puppet-padlocal"},"https://github.com/padlocal/wechaty-puppet-padlocal")),(0,o.kt)("li",{parentName:"ul"},"Provider: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/padlocal"},"PadLocal")),(0,o.kt)("li",{parentName:"ul"},"Support & Feedback: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/padlocal/wechaty-puppet-padlocal/issues"},"https://github.com/padlocal/wechaty-puppet-padlocal/issues")),(0,o.kt)("li",{parentName:"ul"},"Term of Service (ToS): To-be-added"),(0,o.kt)("li",{parentName:"ul"},"Privacy Policy: To-be-added"),(0,o.kt)("li",{parentName:"ul"},"Service Level Agreement (SLA): To-be-added")))}h.isMDXComponent=!0},1409:function(e,t,a){t.Z=a.p+"assets/images/architecture-ab739957ca470ccba03a88d1628cf1c4.webp"},79659:function(e,t,a){t.Z=a.p+"assets/images/qrcode-1dcf94ca076508af8ac61cb4c627dba8.webp"},87376:function(e,t,a){t.Z=a.p+"assets/images/step-1-terminal-501a439ab639987b4891204285c250d8.webp"},5540:function(e,t,a){t.Z=a.p+"assets/images/step-1-7a2e2e5c6a8366ff9dcc28196353c64b.webp"}}]);