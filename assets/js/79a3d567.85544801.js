"use strict";(self.webpackChunkwechaty_docusaurus=self.webpackChunkwechaty_docusaurus||[]).push([[8169],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,h=m["".concat(c,".").concat(d)]||m[d]||s[d]||o;return n?a.createElement(h,l(l({ref:t},u),{},{components:n})):a.createElement(h,l({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},58215:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(67294);function r(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},9877:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(87462),r=n(67294),o=n(72389),l=n(17704),i=n(86010),c="tabItem_LplD";function p(e){var t,n,o,p=e.lazy,u=e.block,s=e.defaultValue,m=e.values,d=e.groupId,h=e.className,k=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=m?m:k.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),f=(0,l.lx)(v,(function(e,t){return e.value===t.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===s?s:null!=(t=null!=s?s:null==(n=k.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(o=k[0])?void 0:o.props.value;if(null!==y&&!v.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var g=(0,l.UB)(),b=g.tabGroupChoices,w=g.setTabGroupChoices,N=(0,r.useState)(y),M=N[0],P=N[1],E=[],x=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=d){var T=b[d];null!=T&&T!==M&&v.some((function(e){return e.value===T}))&&P(T)}var O=function(e){var t=e.currentTarget,n=E.indexOf(t),a=v[n].value;a!==M&&(x(t),P(a),null!=d&&w(d,a))},j=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=E.indexOf(e.currentTarget)+1;n=E[a]||E[0];break;case"ArrowLeft":var r=E.indexOf(e.currentTarget)-1;n=E[r]||E[E.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":u},h)},v.map((function(e){var t=e.value,n=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:M===t?0:-1,"aria-selected":M===t,key:t,ref:function(e){return E.push(e)},onKeyDown:j,onFocus:O,onClick:O},o,{className:(0,i.Z)("tabs__item",c,null==o?void 0:o.className,{"tabs__item--active":M===t})}),null!=n?n:t)}))),p?(0,r.cloneElement)(k.filter((function(e){return e.props.value===M}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==M})}))))}function u(e){var t=(0,o.Z)();return r.createElement(p,(0,a.Z)({key:String(t)},e))}},71393:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return u},default:function(){return k},frontMatter:function(){return p},metadata:function(){return s},toc:function(){return d}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),l=n(9877),i=n(58215),c=["components"],p={title:"Puppet Provider: Mock",sidebar_label:"Mock"},u=void 0,s={unversionedId:"puppet-providers/mock",id:"puppet-providers/mock",title:"Puppet Provider: Mock",description:"Wechaty Puppet Mock",source:"@site/docs/puppet-providers/mock.md",sourceDirName:"puppet-providers",slug:"/puppet-providers/mock",permalink:"/docs/puppet-providers/mock",editUrl:"https://github.com/wechaty/docusaurus/edit/main/docusaurus/docs/puppet-providers/mock.md",tags:[],version:"current",lastUpdatedBy:"Soumi7",lastUpdatedAt:1630128426,formattedLastUpdatedAt:"8/28/2021",frontMatter:{title:"Puppet Provider: Mock",sidebar_label:"Mock"},sidebar:"docs",previous:{title:"Service",permalink:"/docs/puppet-providers/service"},next:{title:"Puppet Provider: DIY",permalink:"/docs/puppet-providers/diy"}},m={},d=[{value:"Features",id:"features",level:2},{value:"Usage",id:"usage",level:2},{value:"Mocker and Environment",id:"mocker-and-environment",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Mocker",id:"mocker",level:3},{value:"Helper Utilities",id:"helper-utilities",level:2},{value:"StateSwitch",id:"stateswitch",level:3},{value:"MemoryCard",id:"memorycard",level:3},{value:"Example: unit testing for <code>math_master</code> game",id:"example-unit-testing-for-math_master-game",level:2},{value:"History",id:"history",level:2},{value:"v0.25 (July 13, 2020)",id:"v025-july-13-2020",level:3},{value:"v0.22 (June 4, 2020)",id:"v022-june-4-2020",level:3},{value:"v0.0.1 (Jun 27, 2018)",id:"v001-jun-27-2018",level:3},{value:"Maintainers",id:"maintainers",level:2}],h={toc:d};function k(e){var t=e.components,n=(0,r.Z)(e,c);return(0,o.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"mock"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/Puppet-Mock-blueviolet",alt:"Wechaty Puppet Mock"}))),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/wechaty/wechaty-puppet-mock/HEAD/docs/images/mock.png",alt:"Wechaty Puppet Mock"})),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://badge.fury.io/js/wechaty-puppet-mock"},(0,o.kt)("img",{parentName:"a",src:"https://badge.fury.io/js/wechaty-puppet-mock.svg",alt:"NPM Version"})),"\n",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/wechaty-puppet-mock?activeTab=versions"},(0,o.kt)("img",{parentName:"a",src:"https://img.shields.io/npm/v/wechaty-puppet-mock/next.svg",alt:"npm (tag)"}))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Repo: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/wechaty/wechaty-puppet-mock"},"https://github.com/wechaty/wechaty-puppet-mock")),(0,o.kt)("li",{parentName:"ul"},"Support & Feedback: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/wechaty/wechaty-puppet-mock/issues"},"https://github.com/wechaty/wechaty-puppet-mock/issues"))),(0,o.kt)("h2",{id:"features"},"Features"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Helps to test Wechaty framework with a mock puppet."),(0,o.kt)("li",{parentName:"ol"},"Can be used as a starter template for writing your own puppet provider.")),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("p",null,"Run ",(0,o.kt)("inlineCode",{parentName:"p"},"wechaty-puppet-mock"),"."),(0,o.kt)(l.Z,{groupId:"operating-systems",defaultValue:"linux",values:[{label:"Linux",value:"linux"},{label:"macOS",value:"mac"},{label:"Windows",value:"windows"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"linux",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install wechaty-puppet-mock\nexport WECHATY_PUPPET=wechaty-puppet-mock\nnpm start\n"))),(0,o.kt)(i.Z,{value:"mac",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install wechaty-puppet-mock\nexport WECHATY_PUPPET=wechaty-puppet-mock\nnpm start\n"))),(0,o.kt)(i.Z,{value:"windows",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install wechaty-puppet-mock\nset WECHATY_PUPPET=wechaty-puppet-mock\nnpm start\n")))),(0,o.kt)("h2",{id:"mocker-and-environment"},"Mocker and Environment"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import {\n  PuppetMock,\n  Mocker,\n  SimpleEnvironment,\n}                     from 'wechaty-puppet-mock'\n\nconst mocker = new Mocker()\nmocker.use(SimpleEnvironment())\n\nconst puppet = new PuppetMock({ mocker })\nconst wechaty = new Wechaty({ puppet })\n\nwechaty.start()\n\n// The Mocker will start perform the SimpleEnvironment...\n")),(0,o.kt)("p",null,"See: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/wechaty/wechaty-puppet-mock/blob/master/src/mock/environment.ts"},"SimpleEnvironment"),"."),(0,o.kt)("h2",{id:"api-reference"},"API Reference"),(0,o.kt)("h3",{id:"mocker"},"Mocker"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { Wechaty }  from 'wechaty'\nimport { \n  PuppetMock,\n  mock,\n}                   from 'wechaty-puppet-mock'\n\nconst mocker = new mock.Mocker()\nconst puppet = new PuppetMock({ mocker })\nconst bot = new Wechaty({ puppet })\n\nawait bot.start()\n\nmocker.scan('https://github.com/wechaty', 1)\n\nconst user = mocker.createContact()\nmocker.login(user)\n\nconst contact = mocker.createContact()\nconst room = mocker.createRoom()\n\nuser.say('Hello').to(contact)\ncontact.say('World').to(user)\n")),(0,o.kt)("h2",{id:"helper-utilities"},"Helper Utilities"),(0,o.kt)("h3",{id:"stateswitch"},"StateSwitch"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"this.state.on('pending')\nthis.state.on(true)\nthis.state.off('pending')\nthis.state.off(true)\n\nawait this.state.ready('on')\nawait this.state.ready('off')\n\n")),(0,o.kt)("h3",{id:"memorycard"},"MemoryCard"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"await memory.set('config', { id: 1, key: 'xxx' })\nconst config = await memory.get('config')\nconsole.log(config)\n// Output: { id: 1, key: 'xxx' }\n")),(0,o.kt)("h2",{id:"example-unit-testing-for-math_master-game"},"Example: unit testing for ",(0,o.kt)("inlineCode",{parentName:"h2"},"math_master")," game"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"math_master")," is a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/wechaty/wechaty-vorpal-contrib"},"Wechaty Vorpal Contrib")," command which is a simple game for answering math questions that asked by a Wechaty bot."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/wechaty/wechaty-vorpal-contrib/HEAD/docs/images/math-master.png",alt:"Math Master Wechaty Game"})),(0,o.kt)("p",null,"You can read the unit testing script at: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/wechaty/wechaty-vorpal-contrib/blob/master/src/contrib/math_master/math_master.spec.ts"},"https://github.com/wechaty/wechaty-vorpal-contrib/blob/master/src/contrib/math_master/math_master.spec.ts")),(0,o.kt)("h2",{id:"history"},"History"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Milestones for master branch:")),(0,o.kt)("h3",{id:"v025-july-13-2020"},"v0.25 (July 13, 2020)"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Rename MockXXX to XXXMock for keep the consistent naming style with PuppetMock."),(0,o.kt)("li",{parentName:"ol"},"Export mock namespace and move all related modules under it.")),(0,o.kt)("h3",{id:"v022-june-4-2020"},"v0.22 (June 4, 2020)"),(0,o.kt)("p",null,"Mocker Released. Mocker is a manager for controlling the behavior of the Puppet activities."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Add MockContact, MockRoom, and MockMessage for Mockers"),(0,o.kt)("li",{parentName:"ol"},"Add MockEnvironment for mocking the server behaviors."),(0,o.kt)("li",{parentName:"ol"},"Support Wechaty#Contact.find() from the mocker.createContacts()."),(0,o.kt)("li",{parentName:"ol"},"Support Wechaty#Room.find() from the mocker.createRooms()."),(0,o.kt)("li",{parentName:"ol"},"Support message event for talker, listener, and room of MockMessage.")),(0,o.kt)("h3",{id:"v001-jun-27-2018"},"v0.0.1 (Jun 27, 2018)"),(0,o.kt)("p",null,"Initial version."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"PuppetMock")," is a skelton Puppet without do anything, it will make testing easy when developing Wechaty."),(0,o.kt)("h2",{id:"maintainers"},"Maintainers"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://wechaty.js.org/contributors/huan"},"@huan"))))}k.isMDXComponent=!0}}]);